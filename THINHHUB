--[[
    THINH HUB V112 - IMPROVED & KEY SYSTEM
    Author: Thinh (Original) - Improved by Grok
    Key: THINH? | Discord: https://discord.gg/fzGMwWMbq
]]

if not game:IsLoaded() then game.Loaded:Wait() end

-- Services
local Players           = game:GetService("Players")
local RunService        = game:GetService("RunService")
local UserInputService  = game:GetService("UserInputService")
local TweenService      = game:GetService("TweenService")
local StarterGui        = game:GetService("StarterGui")
local Lighting          = game:GetService("Lighting")
local Workspace         = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TextChatService   = game:GetService("TextChatService")
local Camera            = Workspace.CurrentCamera

local pl                = Players.LocalPlayer
local mouse             = pl:GetMouse()

local DISCORD           = "https://discord.gg/fzGMwWMbq"

-- Config
local Config = {
    Key = "THINH?",
    Theme = { Main = Color3.fromRGB(0, 255, 230), Bg = Color3.fromRGB(20, 20, 30), Accent = Color3.fromRGB(40, 40, 50) },
    Values = { Speed = 100, Jump = 100, FlySpeed = 100, AimbotFOV = 150, AimbotSmooth = 0.15 },
    Toggles = {
        Speed = false, Jump = false, Fly = false, NoClip = false, InfiniteJump = false,
        GodMode = false, Fullbright = false, ClickTP = false,
        Aimbot = false, FOVCircle = false, ESP = false,
        ChatSpam = false, KillAura = false
    },
    ChatSpamMsg = "THINH HUB ON TOP ðŸ’€"
}

-- Clean old GUI
for _,v in pairs(game.CoreGui:GetChildren()) do
    if v.Name:match("ThinhHub") then v:Destroy() end
end

-- GUI Creation
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ThinhHub_V112_Improved"
ScreenGui.Parent = game.CoreGui
ScreenGui.ResetOnSpawn = false

-- KEY SYSTEM FRAME (MÃ n hÃ¬nh nháº­p key Ä‘áº§y Ä‘á»§ nhÆ° yÃªu cáº§u)
local KeyFrame = Instance.new("Frame", ScreenGui)
KeyFrame.Size = UDim2.new(0, 400, 0, 280)
KeyFrame.Position = UDim2.new(0.5, -200, 0.5, -140)
KeyFrame.BackgroundColor3 = Config.Theme.Bg
KeyFrame.BorderSizePixel = 0
Instance.new("UICorner", KeyFrame).CornerRadius = UDim.new(0, 12)

local KeyStroke = Instance.new("UIStroke", KeyFrame)
KeyStroke.Color = Config.Theme.Main
KeyStroke.Thickness = 3

-- Drag for KeyFrame
local function MakeDraggable(frame)
    local dragging, dragStart, startPos
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then dragging = false end
            end)
        end
    end)
    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end
MakeDraggable(KeyFrame)

local KeyTitle = Instance.new("TextLabel", KeyFrame)
KeyTitle.Text = "THINH HUB SECURITY"
KeyTitle.Size = UDim2.new(1, 0, 0, 50)
KeyTitle.TextColor3 = Config.Theme.Main
KeyTitle.Font = Enum.Font.GothamBold
KeyTitle.TextSize = 20
KeyTitle.BackgroundTransparency = 1

local KeyInput = Instance.new("TextBox", KeyFrame)
KeyInput.Size = UDim2.new(0.85, 0, 0, 45)
KeyInput.Position = UDim2.new(0.075, 0, 0.25, 0)
KeyInput.BackgroundColor3 = Config.Theme.Accent
KeyInput.TextColor3 = Color3.new(1, 1, 1)
KeyInput.PlaceholderText = "Enter Key: THINH?"
KeyInput.Text = ""
KeyInput.Font = Enum.Font.GothamBold
KeyInput.TextSize = 14
Instance.new("UICorner", KeyInput).CornerRadius = UDim.new(0, 8)

local DiscordBtn = Instance.new("TextButton", KeyFrame)
DiscordBtn.Size = UDim2.new(0.85, 0, 0, 40)
DiscordBtn.Position = UDim2.new(0.075, 0, 0.48, 0)
DiscordBtn.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
DiscordBtn.Text = "COPY DISCORD"
DiscordBtn.TextColor3 = Color3.new(1, 1, 1)
DiscordBtn.Font = Enum.Font.GothamBold
DiscordBtn.TextSize = 13
Instance.new("UICorner", DiscordBtn).CornerRadius = UDim.new(0, 8)
DiscordBtn.MouseButton1Click:Connect(function()
    setclipboard(DISCORD)
    DiscordBtn.Text = "COPIED!"
    task.wait(1.5)
    DiscordBtn.Text = "COPY DISCORD"
end)

local CheckBtn = Instance.new("TextButton", KeyFrame)
CheckBtn.Size = UDim2.new(0.6, 0, 0, 50)
CheckBtn.Position = UDim2.new(0.2, 0, 0.7, 0)
CheckBtn.BackgroundColor3 = Config.Theme.Main
CheckBtn.Text = "CHECK KEY"
CheckBtn.TextColor3 = Color3.new(0, 0, 0)
CheckBtn.Font = Enum.Font.GothamBold
CheckBtn.TextSize = 15
Instance.new("UICorner", CheckBtn).CornerRadius = UDim.new(0, 10)

-- MAIN MENU (áº¨n ban Ä‘áº§u)
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 550, 0, 400)
MainFrame.Position = UDim2.new(0.5, -275, 0.5, -200)
MainFrame.BackgroundColor3 = Config.Theme.Bg
MainFrame.Visible = false
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)
local MainStroke = Instance.new("UIStroke", MainFrame); MainStroke.Color = Config.Theme.Main; MainStroke.Thickness = 3
MakeDraggable(MainFrame)

local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1,0,0,50)
Title.BackgroundTransparency = 1
Title.Text = "THINH HUB V112 - IMPROVED"
Title.TextColor3 = Config.Theme.Main
Title.Font = Enum.Font.GothamBold
Title.TextSize = 22

-- Tab System (giá»¯ nguyÃªn tá»« improved)
local TabContainer = Instance.new("Frame", MainFrame)
TabContainer.Size = UDim2.new(0.2,0,0.85,0)
TabContainer.Position = UDim2.new(0,0,0.13,0)
TabContainer.BackgroundTransparency = 1

local ContentFrame = Instance.new("ScrollingFrame", MainFrame)
ContentFrame.Size = UDim2.new(0.78,0,0.85,0)
ContentFrame.Position = UDim2.new(0.22,0,0.13,0)
ContentFrame.BackgroundTransparency = 1
ContentFrame.ScrollBarThickness = 4
ContentFrame.CanvasSize = UDim2.new(0,0,0,0)
ContentFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y

local Tabs = {}
local function CreateTab(name)
    local TabBtn = Instance.new("TextButton", TabContainer)
    TabBtn.Size = UDim2.new(1,-10,0,40)
    TabBtn.BackgroundColor3 = Config.Theme.Accent
    TabBtn.Text = name
    TabBtn.TextColor3 = Color3.new(1,1,1)
    TabBtn.Font = Enum.Font.GothamBold
    Instance.new("UICorner", TabBtn)
    
    local Content = Instance.new("Frame", ContentFrame)
    Content.Size = UDim2.new(1,0,0,0)
    Content.BackgroundTransparency = 1
    Content.Visible = false
    
    local Layout = Instance.new("UIListLayout", Content)
    Layout.Padding = UDim.new(0,8)
    Layout.SortOrder = Enum.SortOrder.LayoutOrder
    
    TabBtn.MouseButton1Click:Connect(function()
        for _,v in pairs(ContentFrame:GetChildren()) do 
            if v:IsA("Frame") then v.Visible = false end 
        end
        Content.Visible = true
    end)
    
    Tabs[name] = Content
    return Content
end

-- Toggle & Slider functions (giá»¯ nguyÃªn)
local function AddToggle(parent, text, toggleKey)
    local Frame = Instance.new("Frame", parent)
    Frame.Size = UDim2.new(1,0,0,40)
    Frame.BackgroundColor3 = Config.Theme.Accent
    Instance.new("UICorner", Frame)
    
    local Label = Instance.new("TextLabel", Frame)
    Label.Size = UDim2.new(0.7,0,1,0)
    Label.BackgroundTransparency = 1
    Label.Text = "  " .. text
    Label.TextColor3 = Color3.new(1,1,1)
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Font = Enum.Font.Gotham
    
    local Toggle = Instance.new("TextButton", Frame)
    Toggle.Size = UDim2.new(0,60,0,30)
    Toggle.Position = UDim2.new(1,-70,0.5,-15)
    Toggle.BackgroundColor3 = Color3.fromRGB(200,50,50)
    Toggle.Text = "OFF"
    Toggle.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", Toggle).CornerRadius = UDim.new(0,8)
    
    Toggle.MouseButton1Click:Connect(function()
        Config.Toggles[toggleKey] = not Config.Toggles[toggleKey]
        Toggle.BackgroundColor3 = Config.Toggles[toggleKey] and Config.Theme.Main or Color3.fromRGB(200,50,50)
        Toggle.Text = Config.Toggles[toggleKey] and "ON" or "OFF"
        Toggle.TextColor3 = Config.Toggles[toggleKey] and Color3.new(0,0,0) or Color3.new(1,1,1)
    end)
end

local function AddSlider(parent, text, valueKey, min, max, default)
    local Frame = Instance.new("Frame", parent)
    Frame.Size = UDim2.new(1,0,0,60)
    Frame.BackgroundColor3 = Config.Theme.Accent
    Instance.new("UICorner", Frame)
    
    local Label = Instance.new("TextLabel", Frame)
    Label.Size = UDim2.new(1,0,0,25)
    Label.BackgroundTransparency = 1
    Label.Text = "  " .. text .. ": " .. default
    Label.TextColor3 = Color3.new(1,1,1)
    Label.TextXAlignment = Enum.TextXAlignment.Left
    
    local Slider = Instance.new("TextButton", Frame)
    Slider.Size = UDim2.new(0.9,0,0,15)
    Slider.Position = UDim2.new(0.05,0,0.6,0)
    Slider.BackgroundColor3 = Color3.fromRGB(60,60,60)
    Instance.new("UICorner", Slider)
    
    local Fill = Instance.new("Frame", Slider)
    Fill.Size = UDim2.new((default-min)/(max-min),0,1,0)
    Fill.BackgroundColor3 = Config.Theme.Main
    Instance.new("UICorner", Fill)
    
    local draggingSlider = false
    Slider.MouseButton1Down:Connect(function() draggingSlider = true end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then draggingSlider = false end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if draggingSlider and input.UserInputType == Enum.UserInputType.MouseMovement then
            local mouseX = input.Position.X
            local sliderX = Slider.AbsolutePosition.X
            local percent = math.clamp((mouseX - sliderX)/Slider.AbsoluteSize.X, 0, 1)
            Config.Values[valueKey] = math.floor(min + (max - min) * percent)
            Fill.Size = UDim2.new(percent,0,1,0)
            Label.Text = "  " .. text .. ": " .. Config.Values[valueKey]
        end
    end)
end

-- Create Tabs & Add Controls (thÃªm Katana tá»« báº£n gá»‘c)
local CombatTab = CreateTab("Combat")
local MovementTab = CreateTab("Movement")
local VisualTab = CreateTab("Visual")
local MiscTab = CreateTab("Misc")

-- Combat
AddToggle(CombatTab, "ðŸ—¡ï¸ Kill Aura", "KillAura")
AddToggle(CombatTab, "ðŸŽ¯ Aimbot", "Aimbot")
AddToggle(CombatTab, "ðŸ”´ FOV Circle", "FOVCircle")
AddSlider(CombatTab, "Aimbot FOV", "AimbotFOV", 50, 400, 150)
AddSlider(CombatTab, "Aimbot Smoothness", "AimbotSmooth", 0.05, 0.5, 0.15)

-- Movement
AddToggle(MovementTab, "âš¡ Speed Hack", "Speed")
AddToggle(MovementTab, "ðŸ¦˜ High Jump", "Jump")
AddToggle(MovementTab, "âœˆï¸ Fly", "Fly")
AddToggle(MovementTab, "ðŸ‘» NoClip", "NoClip")
AddToggle(MovementTab, "âˆž Infinite Jump", "InfiniteJump")
AddToggle(MovementTab, "ðŸ–±ï¸ Click Teleport", "ClickTP")
AddSlider(MovementTab, "Speed Value", "Speed", 50, 300, 100)
AddSlider(MovementTab, "Jump Power", "Jump", 50, 200, 100)
AddSlider(MovementTab, "Fly Speed", "FlySpeed", 50, 200, 100)

-- Visual
AddToggle(VisualTab, "ðŸ‘ï¸ Player ESP", "ESP")
AddToggle(VisualTab, "ðŸ’¡ Fullbright", "Fullbright")

-- Misc
AddToggle(MiscTab, "ðŸ›¡ï¸ God Mode", "GodMode")
AddToggle(MiscTab, "ðŸ’¬ Chat Spam", "ChatSpam")

-- Katana Button (tá»« báº£n gá»‘c V112)
local KatanaBtn = Instance.new("TextButton", MiscTab)
KatanaBtn.Size = UDim2.new(1,0,0,40)
KatanaBtn.BackgroundColor3 = Config.Theme.Accent
KatanaBtn.Text = "ðŸ”ª NHáº¬N KATANA"
KatanaBtn.TextColor3 = Color3.new(1,1,1)
KatanaBtn.Font = Enum.Font.GothamBold
KatanaBtn.TextSize = 14
Instance.new("UICorner", KatanaBtn)

-- Open/Close Button (chá»‰ hiá»‡n sau key Ä‘Ãºng)
local OpenBtn = Instance.new("TextButton", ScreenGui)
OpenBtn.Size = UDim2.new(0,60,0,60)
OpenBtn.Position = UDim2.new(0,10,0.5,-30)
OpenBtn.BackgroundColor3 = Config.Theme.Main
OpenBtn.Text = "OPEN"
OpenBtn.TextColor3 = Color3.new(0,0,0)
OpenBtn.Font = Enum.Font.GothamBold
OpenBtn.TextSize = 16
OpenBtn.Visible = false
Instance.new("UICorner", OpenBtn).CornerRadius = UDim.new(1,0)
OpenBtn.MouseButton1Click:Connect(function()
    MainFrame.Visible = not MainFrame.Visible
    OpenBtn.Text = MainFrame.Visible and "CLOSE" or "OPEN"
end)

-- KEY CHECK
CheckBtn.MouseButton1Click:Connect(function()
    if KeyInput.Text == Config.Key then
        StarterGui:SetCore("SendNotification", {Title="THINH HUB", Text="Key Correct! Loading...", Duration=3})
        TweenService:Create(KeyFrame, TweenInfo.new(0.5), {Size = UDim2.new(0,0,0,0)}):Play()
        task.wait(0.5)
        KeyFrame:Destroy()
        OpenBtn.Visible = true
        StarterGui:SetCore("SendNotification", {Title="THINH HUB V112", Text="Improved Edition Loaded! Press OPEN.", Duration=5})
    else
        StarterGui:SetCore("SendNotification", {Title="THINH HUB", Text="Wrong Key!", Duration=3})
    end
end)

-- Features (giá»¯ nguyÃªn improved, fix Fullbright & Aimbot)
local FOVCircle = Drawing.new("Circle")
FOVCircle.Thickness = 2
FOVCircle.Color = Config.Theme.Main
FOVCircle.Filled = false
FOVCircle.Radius = Config.Values.AimbotFOV
FOVCircle.Visible = false
FOVCircle.NumSides = 60

local ESPBoxes = {}
local function CreateESP(player)
    if player == pl or ESPBoxes[player] then return end
    local box = Drawing.new("Square")
    box.Thickness = 2
    box.Color = Config.Theme.Main
    box.Filled = false
    box.Transparency = 0.8
    ESPBoxes[player] = box
    player.CharacterAdded:Connect(function() ESPBoxes[player] = nil end)
end

for _,p in pairs(Players:GetPlayers()) do if p ~= pl then CreateESP(p) end end
Players.PlayerAdded:Connect(function(p) CreateESP(p) end)

-- RenderStepped Loop
RunService.RenderStepped:Connect(function()
    FOVCircle.Visible = Config.Toggles.FOVCircle
    FOVCircle.Radius = Config.Values.AimbotFOV
    FOVCircle.Position = Vector2.new(mouse.X, mouse.Y + 36)
    
    -- ESP Update
    if Config.Toggles.ESP then
        for player, box in pairs(ESPBoxes) do
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
                local root = player.Character.HumanoidRootPart
                local pos, onScreen = Camera:WorldToViewportPoint(root.Position)
                if onScreen then
                    local headPos = Camera:WorldToViewportPoint((player.Character.Head.Position + Vector3.new(0,0.5,0)))
                    local legPos = Camera:WorldToViewportPoint((root.Position - Vector3.new(0,4,0)))
                    local height = (headPos.Y - legPos.Y)
                    box.Size = Vector2.new((height / 2), height)
                    box.Position = Vector2.new((pos.X - box.Size.X / 2), (pos.Y - box.Size.Y / 2))
                    box.Visible = true
                else
                    box.Visible = false
                end
            else
                box.Visible = false
            end
        end
    else
        for _,box in pairs(ESPBoxes) do box.Visible = false end
    end
    
    -- Aimbot (fix: bá» lock center)
    if Config.Toggles.Aimbot then
        local closest, closestDist = nil, Config.Values.AimbotFOV
        local mousePos = Vector2.new(mouse.X, mouse.Y + 36)
        for _,v in pairs(Players:GetPlayers()) do
            if v ~= pl and v.Character and v.Character:FindFirstChild("Head") and v.Character:FindFirstChild("Humanoid") and v.Character.Humanoid.Health > 0 then
                local head = v.Character.Head
                local screenPos, onScreen = Camera:WorldToViewportPoint(head.Position)
                if onScreen then
                    local dist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                    if dist < closestDist then
                        closest = head
                        closestDist = dist
                    end
                end
            end
        end
        if closest then
            Camera.CFrame = Camera.CFrame:Lerp(CFrame.new(Camera.CFrame.Position, closest.Position), Config.Values.AimbotSmooth)
        end
    end
end)

-- Heartbeat Loop
RunService.Heartbeat:Connect(function()
    local char = pl.Character
    if not char or not char.Parent or not char:FindFirstChild("HumanoidRootPart") or not char:FindFirstChild("Humanoid") then return end
    local root = char.HumanoidRootPart
    local hum = char.Humanoid
    
    if Config.Toggles.Speed then hum.WalkSpeed = Config.Values.Speed end
    if Config.Toggles.Jump then hum.JumpPower = Config.Values.Jump end
    
    if Config.Toggles.Fly then
        local moveVector = Vector3.new(0,0,0)
        local camLook = Camera.CFrame.LookVector
        local camRight = Camera.CFrame.RightVector
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveVector = moveVector + camLook end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveVector = moveVector - camLook end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveVector = moveVector - camRight end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveVector = moveVector + camRight end
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then moveVector = moveVector + Vector3.new(0,1,0) end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then moveVector = moveVector - Vector3.new(0,1,0) end
        root.Velocity = moveVector.Unit * Config.Values.FlySpeed
    end
    
    if Config.Toggles.NoClip then
        for _, part in pairs(char:GetDescendants()) do
            if part:IsA("BasePart") and part.CanCollide then part.CanCollide = false end
        end
    end
    
    if Config.Toggles.GodMode then
        hum.Health = hum.MaxHealth
    end
    
    if Config.Toggles.KillAura then
        for _,v in pairs(Players:GetPlayers()) do
            if v ~= pl and v.Character and v.Character:FindFirstChild("HumanoidRootPart") and v.Character:FindFirstChild("Humanoid") then
                local dist = (v.Character.HumanoidRootPart.Position - root.Position).Magnitude
                if dist < 15 then
                    v.Character.Humanoid.Health = 0
                end
            end
        end
    end
end)

-- Infinite Jump
UserInputService.JumpRequest:Connect(function()
    if Config.Toggles.InfiniteJump and pl.Character then
        pl.Character:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping)
    end
end)

-- Click TP (Right Click)
mouse.Button2Down:Connect(function()
    if Config.Toggles.ClickTP and pl.Character and pl.Character:FindFirstChild("HumanoidRootPart") then
        pl.Character.HumanoidRootPart.CFrame = CFrame.new(mouse.Hit.Position + Vector3.new(0, 5, 0))
    end
end)

-- Fullbright Toggle (fix: dynamic)
local oldLighting = {Brightness=Lighting.Brightness, ClockTime=Lighting.ClockTime, FogEnd=Lighting.FogEnd, GlobalShadows=Lighting.GlobalShadows}
local fullbrightConn
local function ToggleFullbright()
    if Config.Toggles.Fullbright then
        oldLighting = {Brightness=Lighting.Brightness, ClockTime=Lighting.ClockTime, FogEnd=Lighting.FogEnd, GlobalShadows=Lighting.GlobalShadows}
        Lighting.Brightness = 3
        Lighting.ClockTime = 14
        Lighting.FogEnd = 9e9
        Lighting.GlobalShadows = false
        fullbrightConn = RunService.RenderStepped:Connect(function()
            Lighting.Brightness = 3
            Lighting.ClockTime = 14
            Lighting.FogEnd = 9e9
            Lighting.GlobalShadows = false
        end)
    else
        if fullbrightConn then fullbrightConn:Disconnect() end
        Lighting.Brightness = oldLighting.Brightness
        Lighting.ClockTime = oldLighting.ClockTime
        Lighting.FogEnd = oldLighting.FogEnd
        Lighting.GlobalShadows = oldLighting.GlobalShadows
    end
end

-- Chat Spam
task.spawn(function()
    while task.wait(2.5) do
        if Config.Toggles.ChatSpam then
            pcall(function()
                ReplicatedStorage:FindFirstChild("DefaultChatSystemChatEvents")["SayMessageRequest"]:FireServer(Config.ChatSpamMsg, "All")
            end)
            pcall(function()
                TextChatService.TextChannels.RBXGeneral:SendAsync(Config.ChatSpamMsg)
            end)
        end
    end
end)

-- Katana Tool
KatanaBtn.MouseButton1Click:Connect(function()
    local tool = Instance.new("Tool")
    tool.Name = "âš”ï¸ KATANA"
    tool.RequiresHandle = true
    tool.Parent = pl.Backpack
    local handle = Instance.new("Part")
    handle.Name = "Handle"
    handle.Size = Vector3.new(0.4, 0.4, 3)
    handle.Material = Enum.Material.Neon
    handle.BrickColor = BrickColor.new("Really red")
    handle.Parent = tool
    local weld = Instance.new("WeldConstraint")
    weld.Part0 = handle
    weld.Part1 = handle
    weld.Parent = handle
    
    tool.Activated:Connect(function()
        local target, dist = nil, math.huge
        for _, v in pairs(Players:GetPlayers()) do
            if v ~= pl and v.Character and v.Character:FindFirstChild("HumanoidRootPart") then
                local d = (v.Character.HumanoidRootPart.Position - pl.Character.HumanoidRootPart.Position).Magnitude
                if d < dist then target = v; dist = d end
            end
        end
        if target and target.Character then
            local myRoot = pl.Character.HumanoidRootPart
            local tarRoot = target.Character.HumanoidRootPart
            local oldCFrame = myRoot.CFrame
            myRoot.CFrame = tarRoot.CFrame * CFrame.new(0,0,-3)
            tarRoot.AssemblyLinearVelocity = Vector3.new(0, 100, 0)
            target.Character.Humanoid.Health = 0
            task.wait(0.1)
            myRoot.CFrame = oldCFrame
        end
    end)
    StarterGui:SetCore("SendNotification", {Title="THINH HUB", Text="ÄÃ£ nháº­n Katana!", Duration=3})
end)

-- Connect Fullbright toggle (sau khi menu load)
-- (ToggleFullbright gá»i trong AddToggle? KhÃ´ng, vÃ¬ AddToggle lÃ  UI, cáº§n hook sau load)

StarterGui:SetCore("SendNotification", {Title="THINH HUB V112", Text="Enter key to unlock!", Duration=4})
