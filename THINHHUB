-- 1. CHá»œ GAME Táº¢I
if not game:IsLoaded() then game.Loaded:Wait() end

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local StarterGui = game:GetService("StarterGui")
local MarketplaceService = game:GetService("MarketplaceService")
local Workspace = game:GetService("Workspace")
local VirtualUser = game:GetService("VirtualUser")

local pl = Players.LocalPlayer
local mouse = pl:GetMouse()
local DISCORD_LINK = "https://discord.gg/fzGMwWMbq"

-- ANTI-AFK
pl.Idled:Connect(function()
    VirtualUser:Button2Down(Vector2.new(0,0), Workspace.CurrentCamera.CFrame)
    wait(1)
    VirtualUser:Button2Up(Vector2.new(0,0), Workspace.CurrentCamera.CFrame)
end)

-- Láº¤Y TÃŠN GAME
local gameName = "Loading..."
task.spawn(function() pcall(function() gameName = MarketplaceService:GetProductInfo(game.PlaceId).Name end) end)

-- [Báº¢O Máº¬T KEY: THINH?]
local HIDDEN_HASH = "84|72|73|78|72|63"
local function CheckPass(str)
    local code = ""
    for i = 1, #str do code = code .. string.byte(str, i, i) .. "|" end
    return code:sub(1, -2) == HIDDEN_HASH
end

-- THEME SYSTEM
local THEMES = {
    CYAN = {Name="Xanh Neon", Main=Color3.fromRGB(0,255,230), Bg=Color3.fromRGB(15,20,25)},
    RED = {Name="Äá» Huyáº¿t", Main=Color3.fromRGB(255,50,50), Bg=Color3.fromRGB(25,10,10)},
    GREEN = {Name="Xanh LÃ¡", Main=Color3.fromRGB(0,255,0), Bg=Color3.fromRGB(10,25,10)},
    PURPLE = {Name="TÃ­m Má»™ng", Main=Color3.fromRGB(170,0,255), Bg=Color3.fromRGB(25,10,35)},
    ORANGE = {Name="Cam ChÃ¡y", Main=Color3.fromRGB(255,120,0), Bg=Color3.fromRGB(30,15,5)},
    PINK = {Name="Há»“ng Pháº¥n", Main=Color3.fromRGB(255,100,180), Bg=Color3.fromRGB(30,10,20)},
    BLUE = {Name="Xanh Biá»ƒn", Main=Color3.fromRGB(0,120,255), Bg=Color3.fromRGB(10,15,30)},
    WHITE = {Name="Báº¡ch Kim", Main=Color3.fromRGB(255,255,255), Bg=Color3.fromRGB(30,30,30)},
    YELLOW = {Name="VÃ ng Chanh", Main=Color3.fromRGB(255,255,0), Bg=Color3.fromRGB(25,25,5)}
}
local currentTheme = THEMES.CYAN
local isRainbow = false

-- 2. XÃ“A GUI CÅ¨
for _, v in pairs(pl.PlayerGui:GetChildren()) do
    if v.Name == "ThinhDeity_V92" then v:Destroy() end
end

local gui = Instance.new("ScreenGui")
gui.Name = "ThinhDeity_V92"
gui.Parent = pl.PlayerGui
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.DisplayOrder = 9999

-- ==========================================
-- PHáº¦N 1: KEY SYSTEM
-- ==========================================
local keyFrame = Instance.new("Frame", gui); keyFrame.Size=UDim2.new(0,400,0,240); keyFrame.Position=UDim2.new(0.5,0,0.5,0); keyFrame.AnchorPoint=Vector2.new(0.5,0.5); keyFrame.BackgroundColor3=Color3.fromRGB(15,15,20); keyFrame.Visible=true; keyFrame.Active=true; keyFrame.Draggable=true
Instance.new("UICorner", keyFrame).CornerRadius=UDim.new(0,10); local kStr=Instance.new("UIStroke",keyFrame); kStr.Color=Color3.fromRGB(255,255,0); kStr.Thickness=2
local kTitle = Instance.new("TextLabel", keyFrame); kTitle.Text="THINH DEITY V92"; kTitle.Size=UDim2.new(1,0,0,40); kTitle.TextColor3=Color3.fromRGB(255,255,0); kTitle.Font=Enum.Font.GothamBold; kTitle.TextSize=18; kTitle.BackgroundTransparency=1
local kInput = Instance.new("TextBox", keyFrame); kInput.Size=UDim2.new(0.7,0,0.18,0); kInput.Position=UDim2.new(0.1,0,0.25,0); kInput.BackgroundColor3=Color3.fromRGB(40,40,50); kInput.TextColor3=Color3.new(1,1,1); kInput.Text=""; kInput.PlaceholderText="Nháº­p Key..."; Instance.new("UICorner", kInput)

local actualKey, isTyping, isHidden = "", false, true
local hideBtn = Instance.new("TextButton", keyFrame); hideBtn.Size=UDim2.new(0.1,0,0.18,0); hideBtn.Position=UDim2.new(0.82,0,0.25,0); hideBtn.BackgroundColor3=Color3.fromRGB(60,60,70); hideBtn.Text="ðŸ‘ï¸"; Instance.new("UICorner", hideBtn)
kInput:GetPropertyChangedSignal("Text"):Connect(function()
    if isTyping then return end; isTyping=true
    if isHidden then
        local newT = kInput.Text
        if #newT > #actualKey then actualKey = actualKey..newT:sub(#actualKey+1) elseif #newT < #actualKey then actualKey = actualKey:sub(1, #newT) end
        kInput.Text = string.rep("*", #actualKey)
    else actualKey = kInput.Text end; isTyping=false
end)
hideBtn.MouseButton1Click:Connect(function() isHidden=not isHidden; isTyping=true; kInput.Text=isHidden and string.rep("*",#actualKey) or actualKey; isTyping=false end)

local discordBtn = Instance.new("TextButton", keyFrame); discordBtn.Size=UDim2.new(0.8,0,0.15,0); discordBtn.Position=UDim2.new(0.1,0,0.5,0); discordBtn.Text="Láº¤Y KEY (COPY DISCORD)"; discordBtn.BackgroundColor3=Color3.fromRGB(88,101,242); discordBtn.TextColor3=Color3.new(1,1,1); discordBtn.Font=Enum.Font.GothamBold; Instance.new("UICorner", discordBtn)
discordBtn.MouseButton1Click:Connect(function() setclipboard(DISCORD_LINK); discordBtn.Text="ÄÃƒ COPY LINK!"; task.wait(1); discordBtn.Text="Láº¤Y KEY (COPY DISCORD)" end)
local kBtn = Instance.new("TextButton", keyFrame); kBtn.Size=UDim2.new(0.4,0,0.2,0); kBtn.Position=UDim2.new(0.3,0,0.75,0); kBtn.Text="CHECK KEY"; kBtn.BackgroundColor3=Color3.fromRGB(0,255,0); kBtn.Font=Enum.Font.GothamBold; Instance.new("UICorner", kBtn)

-- ==========================================
-- PHáº¦N 2: MAIN MENU & POPUPS
-- ==========================================
local function LoadMainMenu()
    keyFrame:Destroy()
    StarterGui:SetCore("SendNotification", {Title = "V92 ACTIVATED", Text = "God V2 & Anti-Fall Ready!", Duration = 5})

    local config = { speed=false, jump=false, noclip=false, magnet=false, kill=false, esp=false, god=false, invis=false, spam=false, killaura=false, spasm=false, hitbox=false, fly=false, clicktp=false, antifall=false }
    local customSpeed, customJump, customHitbox, customFly, customSpasm, spamContent = 75, 50, 10, 50, 20, "THINH DEITY ON TOP"

    -- UI CHÃNH
    local menu = Instance.new("Frame", gui); menu.Size = UDim2.new(0, 480, 0, 360); menu.Position = UDim2.new(0.5, -240, 0.5, -180); menu.BackgroundColor3 = currentTheme.Bg
    menu.Visible = true; menu.Active = true; menu.Draggable = true; menu.ZIndex = 1; Instance.new("UICorner", menu).CornerRadius = UDim.new(0, 10)
    local mStroke = Instance.new("UIStroke", menu); mStroke.Color = currentTheme.Main; mStroke.Thickness = 2
    local title = Instance.new("TextLabel", menu); title.Text = "THINH DEITY V92"; title.Size = UDim2.new(0.7,0,0,30); title.Position = UDim2.new(0,15,0,5); title.TextColor3 = currentTheme.Main; title.Font = Enum.Font.GothamBold; title.TextSize = 16; title.BackgroundTransparency = 1; title.TextXAlignment = Enum.TextXAlignment.Left
    
    local infoLabel = Instance.new("TextLabel", menu); infoLabel.Size = UDim2.new(0.9,0,0,30); infoLabel.Position = UDim2.new(0.03,0,0.89,0); infoLabel.BackgroundTransparency=1; infoLabel.TextColor3=Color3.fromRGB(180,180,180); infoLabel.Font=Enum.Font.Code; infoLabel.TextSize=10; infoLabel.TextXAlignment=Enum.TextXAlignment.Left
    RunService.RenderStepped:Connect(function() local fps=math.floor(1/RunService.RenderStepped:Wait()); infoLabel.Text=string.format("USER: %s | GAME: %s | FPS: %d", pl.Name, gameName, fps) end)

    local settingsBtn = Instance.new("TextButton", menu); settingsBtn.Size = UDim2.new(0,80,0,30); settingsBtn.Position = UDim2.new(0.8,0,0.02,0); settingsBtn.Text = "âš™ï¸ CÃ€I Äáº¶T"; settingsBtn.BackgroundColor3 = Color3.fromRGB(40,40,50); settingsBtn.TextColor3 = currentTheme.Main; settingsBtn.Font = Enum.Font.GothamBold; settingsBtn.TextSize = 10; Instance.new("UICorner", settingsBtn)

    -- [HELPER FUNCTION: CREATE POPUP]
    local function CreatePopup(name, varRef, applyFunc)
        local f = Instance.new("Frame", gui); f.Visible=false; f.Size=UDim2.new(0,250,0,150); f.Position=UDim2.new(0.5,0,0.4,0); f.AnchorPoint=Vector2.new(0.5,0.5); f.BackgroundColor3=Color3.fromRGB(25,25,30); f.ZIndex=200; Instance.new("UICorner", f); local s = Instance.new("UIStroke", f); s.Color=Color3.new(1,1,1)
        local t = Instance.new("TextLabel", f); t.Text=name; t.Size=UDim2.new(1,0,0,30); t.TextColor3=Color3.new(1,1,1); t.BackgroundTransparency=1; t.ZIndex=201
        local i = Instance.new("TextBox", f); i.Size=UDim2.new(0.8,0,0.3,0); i.Position=UDim2.new(0.1,0,0.25,0); i.Text=tostring(varRef); i.ZIndex=201; Instance.new("UICorner", i)
        local b = Instance.new("TextButton", f); b.Size=UDim2.new(0.4,0,0.25,0); b.Position=UDim2.new(0.3,0,0.65,0); b.Text="OK"; b.BackgroundColor3=Color3.new(0,1,0); b.ZIndex=201; Instance.new("UICorner", b)
        b.MouseButton1Click:Connect(function() applyFunc(i.Text); f.Visible=false end)
        return f
    end

    -- POPUPS
    local speedFrame = CreatePopup("CÃ€I SPEED", customSpeed, function(v) customSpeed=tonumber(v) or 75; config.speed=true end)
    local jumpFrame = CreatePopup("CÃ€I JUMP", customJump, function(v) customJump=tonumber(v) or 50; config.jump=true end)
    local hbFrame = CreatePopup("CÃ€I HITBOX", customHitbox, function(v) customHitbox=tonumber(v) or 10; config.hitbox=true end)
    local flyFrame = CreatePopup("CÃ€I FLY", customFly, function(v) customFly=tonumber(v) or 50; config.fly=true end)
    local spasmFrame = CreatePopup("CÃ€I SPASM", customSpasm, function(v) customSpasm=tonumber(v) or 20; config.spasm=true end)

    local spamFrame = Instance.new("Frame", gui); spamFrame.Visible=false; spamFrame.Size=UDim2.new(0,300,0,180); spamFrame.Position=UDim2.new(0.5,0,0.4,0); spamFrame.AnchorPoint=Vector2.new(0.5,0.5); spamFrame.BackgroundColor3=Color3.fromRGB(25,25,30); spamFrame.ZIndex=200; Instance.new("UICorner", spamFrame); Instance.new("UIStroke", spamFrame).Color=Color3.new(1,1,0)
    local smInput = Instance.new("TextBox", spamFrame); smInput.Size=UDim2.new(0.9,0,0.3,0); smInput.Position=UDim2.new(0.05,0,0.15,0); smInput.Text=""; smInput.PlaceholderText="Nháº­p tin..."; smInput.ZIndex=201; Instance.new("UICorner", smInput)
    local smStart = Instance.new("TextButton", spamFrame); smStart.Size=UDim2.new(0.4,0,0.25,0); smStart.Position=UDim2.new(0.05,0,0.6,0); smStart.Text="Báº®T Äáº¦U"; smStart.BackgroundColor3=Color3.new(0,1,0); smStart.ZIndex=201; Instance.new("UICorner", smStart)
    local smStop = Instance.new("TextButton", spamFrame); smStop.Size=UDim2.new(0.4,0,0.25,0); smStop.Position=UDim2.new(0.55,0,0.6,0); smStop.Text="Dá»ªNG"; smStop.BackgroundColor3=Color3.new(1,0,0); smStop.ZIndex=201; Instance.new("UICorner", smStop)
    smStart.MouseButton1Click:Connect(function() if smInput.Text~="" then spamContent=smInput.Text end; config.spam=true; spamFrame.Visible=false end)
    smStop.MouseButton1Click:Connect(function() config.spam=false end)

    local tpFrame = Instance.new("Frame", gui); tpFrame.Visible=false; tpFrame.Size=UDim2.new(0,250,0,350); tpFrame.Position=UDim2.new(0.85,0,0.5,0); tpFrame.AnchorPoint=Vector2.new(0.5,0.5); tpFrame.BackgroundColor3=Color3.fromRGB(15,15,25); tpFrame.ZIndex=200; Instance.new("UICorner", tpFrame); Instance.new("UIStroke", tpFrame).Color=Color3.fromRGB(0,150,255)
    local tpScroll = Instance.new("ScrollingFrame", tpFrame); tpScroll.Size=UDim2.new(0.9,0,0.75,0); tpScroll.Position=UDim2.new(0.05,0,0.12,0); tpScroll.ZIndex=201; Instance.new("UIListLayout", tpScroll).Padding=UDim.new(0,5)
    local tpClose = Instance.new("TextButton", tpFrame); tpClose.Size=UDim2.new(0.9,0,0.1,0); tpClose.Position=UDim2.new(0.05,0,0.88,0); tpClose.Text="ÄÃ“NG"; tpClose.BackgroundColor3=Color3.new(1,0,0); tpClose.ZIndex=201; Instance.new("UICorner", tpClose)
    tpClose.MouseButton1Click:Connect(function() tpFrame.Visible=false end)
    local function UpdateTPList() for _,v in pairs(tpScroll:GetChildren()) do if v:IsA("TextButton") then v:Destroy() end end for _,p in pairs(Players:GetPlayers()) do if p~=pl then local b=Instance.new("TextButton",tpScroll); b.Size=UDim2.new(1,0,0,30); b.Text=p.Name; b.BackgroundColor3=Color3.fromRGB(40,40,50); b.TextColor3=Color3.new(1,1,1); b.ZIndex=202; Instance.new("UICorner",b); b.MouseButton1Click:Connect(function() if p.Character then pl.Character.HumanoidRootPart.CFrame=p.Character.HumanoidRootPart.CFrame*CFrame.new(0,3,0) end end) end end end

    local viewFrame = Instance.new("Frame", gui); viewFrame.Visible=false; viewFrame.Size=UDim2.new(0,250,0,350); viewFrame.Position=UDim2.new(0.15,0,0.5,0); viewFrame.AnchorPoint=Vector2.new(0.5,0.5); viewFrame.BackgroundColor3=Color3.fromRGB(20,25,20); viewFrame.ZIndex=200; Instance.new("UICorner", viewFrame); Instance.new("UIStroke", viewFrame).Color=Color3.fromRGB(0,255,100)
    local viewScroll = Instance.new("ScrollingFrame", viewFrame); viewScroll.Size=UDim2.new(0.9,0,0.7,0); viewScroll.Position=UDim2.new(0.05,0,0.12,0); viewScroll.ZIndex=201; Instance.new("UIListLayout", viewScroll).Padding=UDim.new(0,5)
    local unviewBtn = Instance.new("TextButton", viewFrame); unviewBtn.Size=UDim2.new(0.9,0,0.1,0); unviewBtn.Position=UDim2.new(0.05,0,0.85,0); unviewBtn.Text="UNVIEW"; unviewBtn.BackgroundColor3=Color3.new(1,0,0); unviewBtn.ZIndex=201; Instance.new("UICorner", unviewBtn)
    local function UpdateViewList() for _,v in pairs(viewScroll:GetChildren()) do if v:IsA("TextButton") then v:Destroy() end end for _,p in pairs(Players:GetPlayers()) do if p~=pl then local b=Instance.new("TextButton",viewScroll); b.Size=UDim2.new(1,0,0,30); b.Text=p.Name; b.BackgroundColor3=Color3.fromRGB(30,40,30); b.TextColor3=Color3.new(1,1,1); b.ZIndex=202; Instance.new("UICorner",b); b.MouseButton1Click:Connect(function() if p.Character and p.Character:FindFirstChild("Humanoid") then Workspace.CurrentCamera.CameraSubject=p.Character.Humanoid end end) end end end
    unviewBtn.MouseButton1Click:Connect(function() Workspace.CurrentCamera.CameraSubject=pl.Character.Humanoid; viewFrame.Visible=false end)

    local setFrame = Instance.new("Frame", gui); setFrame.Visible=false; setFrame.Size=UDim2.new(0,250,0,350); setFrame.Position=UDim2.new(0.85,0,0.5,0); setFrame.AnchorPoint=Vector2.new(0.5,0.5); setFrame.BackgroundColor3=Color3.fromRGB(20,20,30); setFrame.ZIndex=200; Instance.new("UICorner", setFrame); local setStroke = Instance.new("UIStroke", setFrame); setStroke.Color=currentTheme.Main; setStroke.Thickness=2
    local setScroll = Instance.new("ScrollingFrame", setFrame); setScroll.Size=UDim2.new(0.9,0,0.75,0); setScroll.Position=UDim2.new(0.05,0,0.12,0); setScroll.ZIndex=201; Instance.new("UIListLayout", setScroll).Padding=UDim.new(0,5)
    local closeSet = Instance.new("TextButton", setFrame); closeSet.Size=UDim2.new(0.9,0,0.1,0); closeSet.Position=UDim2.new(0.05,0,0.88,0); closeSet.Text="ÄÃ“NG"; closeSet.BackgroundColor3=Color3.new(1,0,0); closeSet.ZIndex=201; Instance.new("UICorner", closeSet)
    settingsBtn.MouseButton1Click:Connect(function() setFrame.Visible = not setFrame.Visible end); closeSet.MouseButton1Click:Connect(function() setFrame.Visible = false end)

    local grid = Instance.new("ScrollingFrame", menu); grid.Size = UDim2.new(0.95,0,0.75,0); grid.Position = UDim2.new(0.025,0,0.15,0); grid.BackgroundTransparency=1; grid.ScrollBarThickness=2
    local layout = Instance.new("UIGridLayout", grid); layout.CellSize = UDim2.new(0.31,0,0,40); layout.CellPadding = UDim2.new(0.02,0,0.02,0)

    -- THEME ENGINE
    local openBtn; local function UpdateColors(col, bg) menu.BackgroundColor3=bg; mStroke.Color=col; title.TextColor3=col; settingsBtn.TextColor3=col; setStroke.Color=col; if openBtn then openBtn.BackgroundColor3=col end; for _, btn in pairs(grid:GetChildren()) do if btn:IsA("TextButton") and btn.BackgroundColor3 ~= Color3.fromRGB(40,20,20) then btn.BackgroundColor3 = col end end end
    RunService.RenderStepped:Connect(function() if isRainbow then local hue=tick()%5/5; UpdateColors(Color3.fromHSV(hue,1,1), currentTheme.Bg) end end)
    for key, val in pairs(THEMES) do local b=Instance.new("TextButton", setScroll); b.Size=UDim2.new(1,0,0,35); b.Text=val.Name; b.BackgroundColor3=val.Main; b.TextColor3=Color3.new(0,0,0); b.ZIndex=202; Instance.new("UICorner", b); b.MouseButton1Click:Connect(function() isRainbow=false; currentTheme=THEMES[key]; UpdateColors(currentTheme.Main, currentTheme.Bg) end) end
    local rbBtn=Instance.new("TextButton", setScroll); rbBtn.Size=UDim2.new(1,0,0,35); rbBtn.Text="RAINBOW"; rbBtn.BackgroundColor3=Color3.new(1,1,1); rbBtn.TextColor3=Color3.new(0,0,0); rbBtn.ZIndex=202; Instance.new("UICorner", rbBtn); rbBtn.MouseButton1Click:Connect(function() isRainbow=true end)

    -- [CLICK TP LOGIC]
    local function TeleportToMouse() if mouse.Target then pl.Character.HumanoidRootPart.CFrame = CFrame.new(mouse.Hit.p + Vector3.new(0,3,0)) end end
    mouse.Button1Down:Connect(function() if config.clicktp and UIS:IsKeyDown(Enum.KeyCode.LeftControl) then TeleportToMouse() end end)

    -- MAIN BUTTONS
    local function createBtn(text, id)
        local btn = Instance.new("TextButton", grid); btn.Text = text; btn.BackgroundColor3 = Color3.fromRGB(40,20,20); btn.TextColor3 = Color3.new(1,1,1); btn.Font = Enum.Font.GothamBold; btn.TextSize = 10; Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
        btn.MouseButton1Click:Connect(function()
            if id == "speed_set" then speedFrame.Visible = not speedFrame.Visible
            elseif id == "jump_set" then jumpFrame.Visible = not jumpFrame.Visible
            elseif id == "hitbox_set" then hbFrame.Visible = not hbFrame.Visible
            elseif id == "spam_set" then spamFrame.Visible = not spamFrame.Visible
            elseif id == "fly_set" then flyFrame.Visible = not flyFrame.Visible
            elseif id == "spasm_set" then spasmFrame.Visible = not spasmFrame.Visible
            elseif id == "tp_list" then tpFrame.Visible = not tpFrame.Visible; if tpFrame.Visible then UpdateTPList() end
            elseif id == "view_list" then viewFrame.Visible = not viewFrame.Visible; if viewFrame.Visible then UpdateViewList() end
            else 
                config[id] = not config[id]
                local activeColor = isRainbow and mStroke.Color or currentTheme.Main
                btn.BackgroundColor3 = config[id] and activeColor or Color3.fromRGB(40,20,20)
                btn.TextColor3 = config[id] and Color3.new(0,0,0) or Color3.new(1,1,1)
                -- Resets
                if id == "speed" and not config.speed and pl.Character then pl.Character.Humanoid.WalkSpeed = 16 end
                if id == "jump" and not config.jump and pl.Character then pl.Character.Humanoid.JumpPower = 50 end
                if id == "hitbox" and not config.hitbox then for _, p in pairs(Players:GetPlayers()) do if p ~= pl and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then p.Character.HumanoidRootPart.Size = Vector3.new(2, 2, 1); p.Character.HumanoidRootPart.Transparency = 1 end end end
                if id == "fly" and not config.fly and pl.Character and pl.Character.HumanoidRootPart:FindFirstChild("DeityFly") then pl.Character.HumanoidRootPart.DeityFly:Destroy() end
                if id == "esp" and not config.esp then for _, p in pairs(Players:GetPlayers()) do if p.Character and p.Character:FindFirstChild("DeityESP") then p.Character.DeityESP:Destroy() end end end
                -- God Mode Reset
                if id == "god" and not config.god and pl.Character and pl.Character:FindFirstChild("HumanoidRootPart") then 
                    pl.Character.HumanoidRootPart.Transparency = 1; pl.Character.HumanoidRootPart.CanCollide = true
                    if pl.Character:FindFirstChild("DeityForceField") then pl.Character.DeityForceField:Destroy() end
                end
            end
        end)
        if id == "speed" then RunService.RenderStepped:Connect(function() if config.speed then btn.Text = "âš¡ SPEED: " .. customSpeed; btn.TextColor3=Color3.new(0,0,0); if not isRainbow then btn.BackgroundColor3=currentTheme.Main end else btn.Text="âš¡ SPEED ON/OFF"; btn.BackgroundColor3=Color3.fromRGB(40,20,20); btn.TextColor3=Color3.new(1,1,1) end end) end
    end

    createBtn("âš™ï¸ CÃ€I SPEED", "speed_set"); createBtn("âš™ï¸ CÃ€I JUMP", "jump_set"); createBtn("âš™ï¸ CÃ€I HITBOX", "hitbox_set")
    createBtn("âš¡ SPEED ON/OFF", "speed"); createBtn("ðŸ¦˜ JUMP ON/OFF", "jump"); createBtn("ðŸŽ¯ HITBOX ON/OFF", "hitbox")
    createBtn("âš™ï¸ CÃ€I SPAM", "spam_set"); createBtn("âš™ï¸ CÃ€I SPASM", "spasm_set"); createBtn("âš™ï¸ CÃ€I FLY", "fly_set")
    createBtn("ðŸ’¬ SPAM ON/OFF", "spam"); createBtn("âš¡ SPASM ON/OFF", "spasm"); createBtn("âœˆï¸ FLY ON/OFF", "fly")
    createBtn("ðŸ‘ï¸ VIEW PLAYER", "view_list"); createBtn("âœˆï¸ TP LIST", "tp_list"); createBtn("ðŸ’ƒ NHáº¢Y (DANCE)", "dance")
    createBtn("ðŸ›¡ï¸ GOD MODE V2", "god"); createBtn("ðŸš« CHá»NG NGÃƒ", "antifall"); createBtn("â˜ ï¸ KILL ALL V7", "kill")
    createBtn("ðŸ‘» NOCLIP", "noclip"); createBtn("ðŸ‘ï¸ ESP", "esp"); createBtn("ðŸ§² MAGNET", "magnet"); createBtn("ðŸ–±ï¸ CLICK TP (CTRL)", "clicktp")

    -- PHYSICS LOOP (GOD V2 & ANTI-FALL)
    RunService.Heartbeat:Connect(function()
        local char = pl.Character; if not char then return end
        local root = char:FindFirstChild("HumanoidRootPart"); local hum = char:FindFirstChild("Humanoid")
        
        if config.speed and hum then hum.WalkSpeed = customSpeed end
        if config.jump and hum then hum.UseJumpPower = true; hum.JumpPower = customJump end
        if config.noclip or config.kill then for _,v in pairs(char:GetDescendants()) do if v:IsA("BasePart") then v.CanCollide = false end end end
        if config.spasm and root then root.CFrame = root.CFrame * CFrame.Angles(math.rad(math.random(-customSpasm,customSpasm)), math.rad(math.random(-customSpasm,customSpasm)), math.rad(math.random(-customSpasm,customSpasm))) end
        if config.dance and root and hum then root.RotVelocity = Vector3.new(0, 50, 0); if hum.FloorMaterial ~= Enum.Material.Air then hum.Jump = true end end

        -- GOD MODE V2 (FORCEFIELD + GHOST)
        if config.god and hum and root then 
            hum.Health = hum.MaxHealth
            root.Transparency = 1; root.CanCollide = false
            if not char:FindFirstChild("DeityForceField") then
                local ff = Instance.new("ForceField", char); ff.Name="DeityForceField"; ff.Visible=false
            end
            for _,v in pairs(char:GetDescendants()) do if v:IsA("TouchTransmitter") then v:Destroy() end end -- Anti-Killbrick
        end

        -- ANTI-FALL
        if config.antifall and root then
            if root.Position.Y < -50 then -- Náº¿u rÆ¡i quÃ¡ sÃ¢u
                root.AssemblyLinearVelocity = Vector3.zero
                root.CFrame = CFrame.new(root.Position.X, 100, root.Position.Z) -- Teleport lÃªn cao
            end
        end

        if config.fly and root and hum then
            local bv = root:FindFirstChild("DeityFly") or Instance.new("BodyVelocity", root); bv.Name = "DeityFly"; bv.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            local move, cam = Vector3.zero, Workspace.CurrentCamera
            if UIS:IsKeyDown(Enum.KeyCode.W) then move = move + cam.CFrame.LookVector end
            if UIS:IsKeyDown(Enum.KeyCode.S) then move = move - cam.CFrame.LookVector end
            if UIS:IsKeyDown(Enum.KeyCode.A) then move = move - cam.CFrame.RightVector end
            if UIS:IsKeyDown(Enum.KeyCode.D) then move = move + cam.CFrame.RightVector end
            if hum.MoveDirection.Magnitude > 0 then move = hum.MoveDirection; move = Vector3.new(move.X, cam.CFrame.LookVector.Y, move.Z) end
            bv.Velocity = move * customFly
        elseif root and root:FindFirstChild("DeityFly") then root.DeityFly:Destroy() end

        if config.hitbox then for _, p in pairs(Players:GetPlayers()) do if p ~= pl and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then local hrp = p.Character.HumanoidRootPart; hrp.Size = Vector3.new(customHitbox, customHitbox, customHitbox); hrp.Transparency = 0.5; hrp.BrickColor = BrickColor.new("Really red"); hrp.Material = "Neon"; hrp.CanCollide = false end end end

        if config.kill and root then
            root.AssemblyAngularVelocity = Vector3.new(9e9, 9e9, 9e9)
            for _, t in pairs(Players:GetPlayers()) do
                if t ~= pl and t.Character and t.Character:FindFirstChild("HumanoidRootPart") then
                    root.CFrame = t.Character.HumanoidRootPart.CFrame * CFrame.Angles(math.random(),math.random(),math.random())
                    root.AssemblyLinearVelocity = Vector3.new(9e9, 9e9, 9e9)
                end
            end
        end
        if config.magnet and root then for _, v in pairs(Workspace:GetDescendants()) do if v:IsA("BasePart") and not v.Anchored and not v:IsDescendantOf(char) and (root.Position - v.Position).Magnitude < 150 then v.CanCollide = false; v.CFrame = root.CFrame * CFrame.new(0, 0, -3); v.AssemblyLinearVelocity = Vector3.zero end end end
    end)
    task.spawn(function() while true do if config.spam then pcall(function() ReplicatedStorage.DefaultChatSystemChatEvents.SayMessageRequest:FireServer(spamContent, "All") end); pcall(function() TextChatService.TextChannels.RBXGeneral:SendAsync(spamContent) end) end; task.wait(2.5) end end)
    task.spawn(function() while task.wait(1) do if config.esp then for _, p in pairs(Players:GetPlayers()) do if p ~= pl and p.Character and not p.Character:FindFirstChild("DeityHighlight") then local h = Instance.new("Highlight", p.Character); h.Name = "DeityHighlight"; h.FillColor = currentTheme.Main; h.OutlineColor = Color3.new(1,1,1); h.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop end end end end end)

    openBtn = Instance.new("TextButton", gui); openBtn.Size = UDim2.new(0, 55, 0, 55); openBtn.Position = UDim2.new(0, 20, 0.4, 0); openBtn.BackgroundColor3 = currentTheme.Main; openBtn.Text = "T"; openBtn.Font = Enum.Font.GothamBold; openBtn.TextSize = 24; Instance.new("UICorner", openBtn).CornerRadius = UDim.new(1,0)
    openBtn.MouseButton1Click:Connect(function() menu.Visible = not menu.Visible end)
    local d, ds, sp
    openBtn.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then d = true; ds = i.Position; sp = openBtn.Position end end)
    UIS.InputChanged:Connect(function(i) if d and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then local delta = input.Position - ds; openBtn.Position = UDim2.new(sp.X.Scale, sp.X.Offset + delta.X, sp.Y.Scale, sp.Y.Offset + delta.Y) end end)
    UIS.InputEnded:Connect(function(i) d = false end)
end

kBtn.MouseButton1Click:Connect(function() if CheckPass(actualKey) then kBtn.Text = "SUCCESS!"; kBtn.BackgroundColor3 = Color3.fromRGB(0,255,255); task.wait(1); LoadMainMenu() else kBtn.Text = "WRONG KEY!"; kBtn.BackgroundColor3 = Color3.fromRGB(255,0,0); task.wait(1); kBtn.Text = "CHECK KEY"; kBtn.BackgroundColor3 = Color3.fromRGB(0,255,0) end end)
